<!--
Single-file interactive Birthday Puzzle (Crossword -> Puzzle2 -> Final Reveal)
Files: this single HTML contains all three stages as sections and client-side JS logic.
How to use:
1. Save this file as `index.html`.
2. Open locally to test, or publish to GitHub Pages/Netlify/Vercel for free hosting.
   - GitHub Pages: push to a repo and enable Pages, or just upload file to a gh-pages branch.
   - Netlify: drag & drop this file into the Sites area.
3. Replace placeholders (HER_NAME, LOCATION, FULL_DATE, START_TIME) in the finalRevealData object in the script.

Notes:
- Stage 1 is a lightweight interactive crossword UI: you fill answers for each clue on the right. When all answers match, the grid fills and the hidden middle row reads JOIN THE PARTY and will redirect to Puzzle 2.
- Stage 2 is a simple word-scramble solver (two puzzles). When both solved correctly, you go to the final reveal.
- All checks are case-insensitive. This is client-side only and designed for fun invites. If you want stronger verification, we can add server checks or obfuscation.
--> 

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Birthday Puzzle ‚Äî Crossword Game</title>
  <style>
    :root{--accent:#d946ef;--bg:#0f172a;--card:#0b1220;--muted:#94a3b8;color-scheme:dark}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial}
    body{background:linear-gradient(180deg,#07102a 0%, #0b1220 100%);color:#e6eef8;display:flex;align-items:flex-start;justify-content:center;padding:28px}
    .container{width:1000px;max-width:100%;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:12px;padding:20px;box-shadow:0 8px 30px rgba(2,6,23,0.6)}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;flex-wrap:wrap;gap:10px}
    h1{font-size:20px;margin:0}
    .grid-and-clues{display:flex;gap:18px;flex-wrap:wrap}
    /* crossword grid */
    .grid{display:grid;grid-template-columns:repeat(8,1fr);grid-template-rows:repeat(8,1fr);gap:4px;padding:8px;background:rgba(255,255,255,0.02);border-radius:8px;max-width:100%}
    .cell{width:38px;height:38px;border-radius:6px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.02);position:relative}
    .cell input{width:100%;height:100%;border:0;background:transparent;color:inherit;text-align:center;font-weight:600;font-size:16px}
    .cell.block{background:#071025}
    .cell.num{font-size:9px;position:absolute;left:4px;top:2px;color:var(--muted)}
    .clues{flex:1;min-width:260px}
    .clue-list{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .clue-box{background:rgba(255,255,255,0.02);padding:12px;border-radius:8px}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    input.clue-input{width:100%;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    .btn{display:inline-block;padding:10px 14px;border-radius:8px;background:linear-gradient(90deg,var(--accent),#7c3aed);color:white;border:0;font-weight:700;cursor:pointer}
    .muted{color:var(--muted);font-size:13px}
    .center{text-align:center}
    .hidden{display:none}
    .stage{padding:12px}
    .top-note{font-size:13px;color:var(--muted);margin-bottom:6px}
    footer{margin-top:12px;font-size:13px;color:var(--muted);text-align:center}
    /* puzzle2 */
    .puzzle2-wrap{display:flex;gap:20px;align-items:flex-start;flex-wrap:wrap}
    .scramble-card{background:rgba(255,255,255,0.02);padding:16px;border-radius:8px;flex:1;min-width:250px}
    .scramble-word{font-size:28px;letter-spacing:6px;font-weight:800}
    .success{background:linear-gradient(90deg,#10b981,#06b6d4);padding:8px;border-radius:8px;color:#021018;display:inline-block;margin-top:8px}
    .final-card{padding:18px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent)}
    @media(max-width:920px){
      .grid-and-clues{flex-direction:column}
      .grid{justify-self:center;margin:auto}
      .clue-list{grid-template-columns:1fr}
      .scramble-word{font-size:22px;letter-spacing:4px}
    }
    @media(max-width:600px){
      body{padding:14px}
      h1{font-size:16px}
      .btn{padding:8px 12px;font-size:14px}
      .cell{width:32px;height:32px}
      .cell input{font-size:14px}
      .scramble-word{font-size:20px}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>Can you solve the puzzle and unlock the details?</h1>
        <div class="top-note">Crossword ‚Üí Puzzle ‚Üí Final reveal (automated)</div>
      </div>
    </header>

    <!-- Stage 1: Crossword -->
    <section id="stage-crossword" class="stage">
      <div class="grid-and-clues">
        <div>
          <div class="grid" id="crossword-grid" aria-hidden="false"></div>
          <div class="center" style="margin-top:8px">
            <button id="check-crossword" class="btn">Check & Continue</button>
            <div id="cw-feedback" class="muted" style="margin-top:8px"></div>
          </div>
        </div>

        <div class="clues">
          <div class="clue-list">
            <div class="clue-box">
              <strong>Across</strong>
              <div style="margin-top:8px">
                <label>1. Age she‚Äôs celebrating this year (Answer: FORTY)</label>
                <input id="a1" class="clue-input" placeholder="Type answer (e.g. FORTY)">
                <label style="margin-top:8px">2. Her favorite weekend escape (BEACH)</label>
                <input id="a2" class="clue-input" placeholder="BEACH">
                <label style="margin-top:8px">3. A drink she‚Äôll definitely raise a toast with (WINE)</label>
                <input id="a3" class="clue-input" placeholder="WINE">
                <label style="margin-top:8px">4. The month of the celebration (OCTOBER)</label>
                <input id="a4" class="clue-input" placeholder="OCTOBER">
              </div>
            </div>

            <div class="clue-box">
              <strong>Down</strong>
              <div style="margin-top:8px">
                <label>2. She‚Äôs always ready for a new ___ (ADVENTURE)</label>
                <input id="d2" class="clue-input" placeholder="ADVENTURE">
                <label style="margin-top:8px">4. Party location city (NAIROBI)</label>
                <input id="d4" class="clue-input" placeholder="NAIROBI">
                <label style="margin-top:8px">6. Her personality: relaxed and ___ (CHILL)</label>
                <input id="d6" class="clue-input" placeholder="CHILL">
                <label style="margin-top:8px">8. The day of the party (SATURDAY)</label>
                <input id="d8" class="clue-input" placeholder="SATURDAY">
              </div>
            </div>
          </div>
          <div style="margin-top:12px" class="muted">Tip: Fill the answers on the right then press <strong>Check & Continue</strong>. The secret phrase across the middle row will appear when correct.</div>
        </div>
      </div>
    </section>

    <!-- Stage 2: Puzzle 2 (word scramble) -->
    <section id="stage-puzzle2" class="stage hidden">
      <div class="puzzle2-wrap">
        <div class="scramble-card">
          <h3>Puzzle #2: Unscramble the words</h3>
          <p class="muted">Solve both to unlock the final reveal.</p>
          <div style="margin-top:12px">
            <div>
              <div class="muted">Scramble 1</div>
              <div class="scramble-word" id="scr1"> </div>
              <input id="scr1-input" class="clue-input" placeholder="Type your answer here">
              <div id="scr1-feedback" class="muted"></div>
            </div>

            <div style="margin-top:12px">
              <div class="muted">Scramble 2</div>
              <div class="scramble-word" id="scr2"> </div>
              <input id="scr2-input" class="clue-input" placeholder="Type your answer here">
              <div id="scr2-feedback" class="muted"></div>
            </div>

            <div style="margin-top:12px" class="center">
              <button id="check-puzzle2" class="btn">Submit Answers</button>
              <div id="p2-feedback" class="muted" style="margin-top:8px"></div>
            </div>
          </div>
        </div>

    </section>

    <!-- Stage 3: Final Reveal -->
    <section id="stage-final" class="stage hidden">
      <div class="final-card center">
        <h2 id="final-head">üéâ You‚Äôve cracked the code! üéâ</h2>
        <p id="final-text" class="muted" style="max-width:640px;margin:8px auto;line-height:1.5"></p>
        <div style="margin-top:10px">
          <button id="restart" class="btn" style="background:linear-gradient(90deg,#f97316,#ef4444);">Play again</button>
        </div>
      </div>
    </section>

    <footer>Made with ‚ù§Ô∏è.</footer>
  </div>

<script>
/* --- Configuration: replace these with actual party details --- */
const finalRevealData = {
  herName: "[Her Name]",
  venue: "[Location]",
  fullDate: "[Full Date]",
  startTime: "[Start Time]"
};

/* --- Crossword placement logic --- */
const GRID_SIZE = 8;
const layout = [
  [1,1,1,1,1,1,1,1],
  [1,1,1,0,1,1,1,1],
  [1,1,1,1,1,1,1,1],
  [1,1,1,1,1,1,1,1],
  [1,1,1,1,1,1,1,1],
  [1,1,1,1,1,1,1,1],
  [1,1,1,1,1,1,0,1],
  [1,1,1,1,1,1,1,1]
];
const HIDDEN_PHRASE = "JOINPARTY";
const ANSWERS = {
  a1: "FORTY",
  a2: "BEACH",
  a3: "WINE",
  a4: "OCTOBER",
  d2: "ADVENTURE",
  d4: "NAIROBI",
  d6: "CHILL",
  d8: "SATURDAY"
};

const gridEl = document.getElementById('crossword-grid');
let cells = [];
for(let r=0;r<GRID_SIZE;r++){
  for(let c=0;c<GRID_SIZE;c++){
    const div = document.createElement('div');
    div.className = 'cell';
    if(layout[r][c]===0) { div.classList.add('block'); }
    else {
      const inp = document.createElement('input');
      inp.maxLength = 1;
      inp.addEventListener('input', e=>{ e.target.value = e.target.value.toUpperCase().slice(0,1);});
      div.appendChild(inp);
    }
    gridEl.appendChild(div);
    cells.push(div);
  }
}

function getClueValue(id){ return document.getElementById(id).value.trim().toUpperCase(); }
function checkAllClues(){
  for(const k in ANSWERS){
    if(getClueValue(k)!==ANSWERS[k]) return false;
  }
  return true;
}
function fillGridWithDemo(){
  const filled = Array(GRID_SIZE*GRID_SIZE).fill('');
  const words = [
    {r:0,start:0,w:'FORTY'},
    {r:1,start:0,w:'BEACH'},
    {r:2,start:2,w:'WINE'},
    {r:3,start:0,w:'JOINPARTY'},
    {r:4,start:0,w:'OCTOBER'},
    {r:5,start:0,w:'NAIROBI'},
    {r:6,start:0,w:'CHILL'},
    {r:7,start:0,w:'SATURDAY'}
  ];
  for(const row of words){
    for(let i=0;i<row.w.length && (row.start+i)<GRID_SIZE;i++){
      filled[row.r*GRID_SIZE+row.start+i] = row.w[i];
    }
  }
  for(let i=0;i<cells.length;i++){
    if(layout[Math.floor(i/GRID_SIZE)][i%GRID_SIZE]===0) continue;
    const inp = cells[i].querySelector('input');
    inp.value = filled[i] || '';
  }
}

document.getElementById('check-crossword').addEventListener('click', ()=>{
  const fb = document.getElementById('cw-feedback');
  if(!checkAllClues()){ fb.textContent = 'Not all clues are correct yet ‚Äî double-check your answers.'; return; }
  fb.textContent = 'Nice! The middle row reads the secret phrase. Redirecting to Puzzle #2...';
  fillGridWithDemo();
  setTimeout(()=>goToStage('puzzle2'),1400);
});

function goToStage(stage){
  document.querySelectorAll('.stage').forEach(s=>s.classList.add('hidden'));
  document.getElementById('stage-'+stage).classList.remove('hidden');
}

const scrambles = [
  {word: 'CONFETTI', scramble: shuffle('CONFETTI')},
  {word: 'CAKE', scramble: shuffle('CAKE')}
];
function shuffle(s){
  const a=s.split('');
  for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}
  return a.join('');
}
document.getElementById('scr1').textContent = scrambles[0].scramble.split('').join(' ');
document.getElementById('scr2').textContent = scrambles[1].scramble.split('').join(' ');
function normalize(x){return x.trim().toUpperCase();}
document.getElementById('check-puzzle2').addEventListener('click', ()=>{
  const s1=normalize(document.getElementById('scr1-input').value);
  const s2=normalize(document.getElementById('scr2-input').value);
  let ok=true;
  if(s1!==scrambles[0].word){ document.getElementById('scr1-feedback').textContent='Scramble 1 not correct.'; ok=false } else document.getElementById('scr1-feedback').textContent='Good!';
  if(s2!==scrambles[1].word){ document.getElementById('scr2-feedback').textContent='Scramble 2 not correct.'; ok=false } else document.getElementById('scr2-feedback').textContent='Good!';
  if(ok){ document.getElementById('p2-feedback').textContent='All solved ‚Äî revealing final details...'; setTimeout(()=>goToStage('final'),900); }
});

function populateFinal(){
  const el = document.getElementById('final-text');
  el.innerHTML = `üéâ We celebrate ${escapeHtml(finalRevealData.herName)}‚Äôs 40th!<br><br>üìç Venue: ${escapeHtml(finalRevealData.venue)}<br>üìÖ Date: ${escapeHtml(finalRevealData.fullDate)}<br>üïò Time: ${escapeHtml(finalRevealData.startTime)}<br><br>Come ready for fun, laughter, and adventure as we celebrate 40 fabulous years!`;
}
function escapeHtml(s){ return (s+'').replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }
document.getElementById('restart').addEventListener('click', ()=>{
  ['a1','a2','a3','a4','d2','d4','d6','d8','scr1-input','scr2-input'].forEach(id=>{const el=document.getElementById(id); if(el) el.value='';});
  scrambles[0].scramble = shuffle(scrambles[0].word);
  scrambles[1].scramble = shuffle(scrambles[1].word);
  document.getElementById('scr1').textContent = scrambles[0].scramble.split('').join(' ');
  document.getElementById('scr2').textContent = scrambles[1].scramble.split('').join(' ');
  goToStage('crossword');
});
populateFinal();
</script>
</body>
</html>
